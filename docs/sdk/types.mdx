---
sidebar_position: 6
---

# TypeScript Types

Complete TypeScript type definitions for the SDK.

## Authentication Types

### `AuthMethod`

```typescript
type AuthMethod = 'wallet' | 'discord' | 'telegram' | 'farcaster' | 'twitter' | 'github' | 'passkey';
```

Supported authentication methods.

---

### `SocialProvider`

```typescript
type SocialProvider = 'discord' | 'telegram' | 'farcaster' | 'twitter' | 'github';
```

Supported social authentication providers.

---

## Configuration Types

### `EthosAuthConfig`

```typescript
interface EthosAuthConfig {
  authServerUrl?: string;
  minScore?: number;
}
```

Base configuration for Ethos authentication.

---

### `WalletAuthConfig`

```typescript
interface WalletAuthConfig extends EthosAuthConfig {
  chainId?: number;
  statement?: string;
  expirationTime?: number;
}
```

Configuration for wallet-based authentication.

---

## SIWE Types

### `SIWEMessage`

```typescript
interface SIWEMessage {
  domain: string;
  address: string;
  uri: string;
  version: string;
  chainId: number;
  nonce: string;
  issuedAt: string;
  statement?: string;
  expirationTime?: string;
  notBefore?: string;
  requestId?: string;
  resources?: string[];
}
```

EIP-4361 compliant SIWE message structure.

---

### `NonceResponse`

```typescript
interface NonceResponse {
  nonce: string;
  expiresAt: string;
}
```

Response from nonce generation endpoint.

---

### `VerifyParams`

```typescript
interface VerifyParams {
  message: string;
  signature: string;
  address: string;
}
```

Parameters for signature verification.

---

## User Profile Types

### `EthosUser`

```typescript
interface EthosUser {
  /** Unique subject identifier (ethos:profileId) */
  sub: string;
  
  /** Display name */
  name: string;
  
  /** Profile picture URL */
  picture: string | null;
  
  /** Ethos profile ID */
  ethosProfileId: number;
  
  /** Ethos username */
  ethosUsername: string | null;
  
  /** Ethos credibility score (0-2800) */
  ethosScore: number;
  
  /** Ethos status */
  ethosStatus: string;
  
  /** List of attestation types */
  ethosAttestations: string[];
  
  /** Authentication method used */
  authMethod: AuthMethod;
  
  /** Wallet address (for wallet auth) */
  walletAddress?: string;
  
  /** Social provider (for social auth) */
  socialProvider?: SocialProvider;
  
  /** Social account ID (for social auth) */
  socialId?: string;
  
  /** URL to user's Ethos profile page */
  profileUrl?: string;
}
```

Complete user profile from Ethos Network.

---

## Authentication Result Types

### `AuthResult`

```typescript
interface AuthResult {
  /** JWT access token */
  accessToken: string;
  
  /** Token type (always 'Bearer') */
  tokenType: 'Bearer';
  
  /** Token expiration time in seconds */
  expiresIn: number;
  
  /** Authenticated user profile */
  user: EthosUser;
  
  /** Refresh token (optional) */
  refreshToken?: string;
}
```

Result from successful authentication.

---

### `WalletAuthResult`

```typescript
type WalletAuthResult = AuthResult;
```

Wallet authentication result (alias of `AuthResult`).

---

## Social Auth Types

### `SocialAuthParams`

```typescript
interface SocialAuthParams {
  redirectUri: string;
  state?: string;
  minScore?: number;
}
```

Parameters for social authentication redirect.

---

### `TelegramAuthData`

```typescript
interface TelegramAuthData {
  id: number;
  first_name: string;
  last_name?: string;
  username?: string;
  photo_url?: string;
  auth_date: number;
  hash: string;
}
```

Data from Telegram Login Widget.

---

### `FarcasterAuthParams`

```typescript
interface FarcasterAuthParams {
  fid: number;
  custodyAddress: string;
  message: string;
  signature: string;
}
```

Parameters for Farcaster SIWF authentication.

---

## WebAuthn Types

### `WebAuthnRegistrationOptions`

```typescript
interface WebAuthnRegistrationOptions {
  challenge: string;
  rp: {
    id: string;
    name: string;
  };
  user: {
    id: string;
    name: string;
    displayName: string;
  };
  pubKeyCredParams: Array<{
    type: 'public-key';
    alg: number;
  }>;
  timeout?: number;
  authenticatorSelection?: {
    authenticatorAttachment?: 'platform' | 'cross-platform';
    residentKey?: 'required' | 'preferred' | 'discouraged';
    userVerification?: 'required' | 'preferred' | 'discouraged';
  };
  attestation?: 'none' | 'indirect' | 'direct';
}
```

Options for creating a new passkey credential.

---

### `WebAuthnRegistrationCredential`

```typescript
interface WebAuthnRegistrationCredential {
  id: string;
  rawId: string;
  type: 'public-key';
  response: {
    clientDataJSON: string;
    attestationObject: string;
  };
}
```

Registration credential to send to server for verification.

---

### `WebAuthnAuthenticationOptions`

```typescript
interface WebAuthnAuthenticationOptions {
  challenge: string;
  rpId?: string;
  timeout?: number;
  userVerification?: 'required' | 'preferred' | 'discouraged';
  allowCredentials?: Array<{
    type: 'public-key';
    id: string;
    transports?: ('usb' | 'nfc' | 'ble' | 'internal' | 'hybrid')[];
  }>;
}
```

Options for authenticating with an existing passkey.

---

### `WebAuthnAuthenticationCredential`

```typescript
interface WebAuthnAuthenticationCredential {
  id: string;
  rawId: string;
  type: 'public-key';
  response: {
    clientDataJSON: string;
    authenticatorData: string;
    signature: string;
    userHandle?: string | null;
  };
}
```

Authentication credential to send to server for verification.

---

## Session Types

### `SessionState`

```typescript
interface SessionState {
  isAuthenticated: boolean;
  user: EthosUser | null;
  accessToken: string | null;
  expiresAt: number | null;
  refreshToken: string | null;
}
```

Session state for managing user sessions.

---

### `SessionStorage`

```typescript
interface SessionStorage {
  get(key: string): string | null;
  set(key: string, value: string): void;
  remove(key: string): void;
}
```

Interface for session storage implementations.

---

### `AuthStateChangeCallback`

```typescript
type AuthStateChangeCallback = (state: SessionState) => void;
```

Callback for auth state changes.

---

## Usage Examples

### Type Imports

```typescript
import type {
  EthosUser,
  AuthResult,
  WalletAuthConfig,
  SIWEMessage,
  AuthMethod,
} from '@thebbz/siwe-ethos';
```

### Type Guards

```typescript
function isWalletAuth(user: EthosUser): boolean {
  return user.authMethod === 'wallet';
}

function isSocialAuth(user: EthosUser): boolean {
  return user.authMethod !== 'wallet';
}
```

### Generic Functions

```typescript
async function authenticateUser<T extends AuthMethod>(
  method: T,
  params: any
): Promise<AuthResult> {
  // Implementation
}
```

### Type Narrowing

```typescript
if (user.walletAddress) {
  // TypeScript knows walletAddress is string here
  console.log('Wallet:', user.walletAddress);
}

if (user.socialProvider) {
  // TypeScript knows socialProvider is SocialProvider here
  console.log('Provider:', user.socialProvider);
}
```
